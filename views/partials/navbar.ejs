<nav class="navbar" id="mainNav">
    <div class="navbar-container">


        <!--SINISTRA-->
        <div class="navbar-logo navbar-left">
            <a href="/" class="logo">ComixCity</a>
        </div>


        <!--DESTRA-->
        <div class="navbar-right">
            <div class="search-container">
                <button class="search-toggle" aria-label="Cerca">
                    <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" fill="currentColor"
                        viewBox="0 0 24 24">
                        <path
                            d="M10 2a8 8 0 105.293 14.293l5.707 5.707 1.414-1.414-5.707-5.707A8 8 0 0010 2zm0 2a6 6 0 110 12 6 6 0 010-12z" />
                    </svg>
                </button>



                <!-- Searchbar nascosta -->
                <div class="search-bar-wrapper" id="searchBar">
                    <form class="search-form" onsubmit="return false;">
                        <input type="text" id="searchInput" name="q" placeholder="Cerca..." required
                            autocomplete="off" />
                        <div id="searchResults" class="search-results"></div>
                    </form>
                </div>
            </div>

            <!-- Bottone Hamburger SOLO MOBILE -->
            <button class="hamburger" id="hamburger" aria-label="Menu">
                &#9776;
            </button>

            <ul class="menu" id="menu">
                <li><a href="#biglietti">Biglietti</a></li>
                <li><a href="#eventi">Eventi</a></li>
                <li><a href="#stand">Stand</a></li>
            </ul>
            <div class="menu-overlay" id="menuOverlay"></div>

            <% if (user) { %>
                <a href="/areapersonale" class="nav-btn login-link">
                    <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor"
                        viewBox="0 0 16 16" class="icon-svg">
                        <path d="M8 8a3 3 0 100-6 3 3 0 000 6z"/>
                        <path fill-rule="evenodd" d="M14 14s-1-4-6-4-6 4-6 4v1h12v-1z"/>
                    </svg>Area Personale</a>
                <form action="/logout" method="get" style="display: inline">
                    <button type="submit" class="nav-btn logout-link">
                        <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" viewBox="0 0 16 16" class="icon-svg">
                            <path fill-rule="evenodd" d="M6 13.5a.5.5 0 01.5-.5h5.793l-3.147-3.146a.5.5 0 01.708-.708l4 4a.5.5 0 010 .708l-4 4a.5.5 0 11-.708-.708L12.293 14H6.5a.5.5 0 01-.5-.5z"/>
                            <path fill-rule="evenodd" d="M3.5 2A1.5 1.5 0 002 3.5v9A1.5 1.5 0 003.5 14h6a.5.5 0 000-1h-6a.5.5 0 01-.5-.5v-9A.5.5 0 013.5 3h6a.5.5 0 000-1h-6z"/>
                        </svg>Logout
                    </button>
                </form>
            <% } else { %>
                <a href="/login" class="nav-btn login-link"> 
                        <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" viewBox="0 0 16 16" class="icon-svg">
                            <path fill-rule="evenodd" d="M10.146 8.354a.5.5 0 010-.708L13.293 4.5a.5.5 0 11.708.708L11.707 8l2.294 2.792a.5.5 0 11-.708.708l-3.147-3.146z"/>
                            <path fill-rule="evenodd" d="M4.5 3A1.5 1.5 0 003 4.5v7A1.5 1.5 0 004.5 13h7A1.5 1.5 0 0013 11.5v-7A1.5 1.5 0 0011.5 3h-7zM4.5 4a.5.5 0 00-.5.5v7a.5.5 0 00.5.5h7a.5.5 0 00.5-.5v-7a.5.5 0 00-.5-.5h-7z"/>
                        </svg> Login </a>
                <a href="/register" class="nav-btn register-link">
                        <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" viewBox="0 0 16 16" class="icon-svg">
                            <path d="M8 7a3 3 0 100-6 3 3 0 000 6z"/>
                            <path fill-rule="evenodd" d="M14 14s-1-4-6-4-6 4-6 4v1h12v-1z"/>
                            <path fill-rule="evenodd" d="M13.5 5.5a.5.5 0 01.5.5v1h1a.5.5 0 010 1h-1v1a.5.5 0 01-1 0V8h-1a.5.5 0 010-1h1V6a.5.5 0 01.5-.5z"/>
                        </svg> Registrati
                </a>
            <% } %>
                <a href="/carrello" class="nav-btn cart-link">
                        Carrello
                    <span class="cart-badge" id="cartBadge">0</span>
                </a>
        </div>
    </div>
</nav>